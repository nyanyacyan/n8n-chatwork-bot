# Services Guide

フォーム
```python
# coding: utf-8
# $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
# 仕様：
# 対象の値に対して条件分岐を行い、True/Falseを返す
# $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
# import


# ----------------------------------------------------------------------------------
# **********************************************************************************

class XXXDomainService:

# ----------------------------------------------------------------------------------
# 2つ以上あるのが望ましい

    @staticmethod
    def is_xxx(content: OutgoingMessage) -> bool:
        ...条件分岐処理...


# **********************************************************************************
```

## servicesで行っていること

### 判断をしている（真偽判断）

判断とは対象の値の内容に対して必要な制御をかける

例）
- LLMからのResponseの中に不要なものがあった場合にはFalseにする
- 特定のワードが入っていたらFalseにする

### 値に対して条件を設けて、True/Falseを返すような処理を行う場所


## servicesで行っていないこと
### 値の生成や変換
- 生成や変換はentityやvalue objectの責務とする
- 例）Message → Prompt への変換ルール

### 外部サービスとのやりとり
- APIコールなどの外部サービスとのやりとりはinfrastructure層の責務とする


## servicesではすべてのvaluesを定義するわけではない
### あくまでも必要になったvaluesのみを定義する
- 条件分岐が必要な値のみ定義するようにする

## まとめ
- services層はドメインロジックの中で判断を行う場所
- 生成や変換、外部サービスとのやりとりは行わない    
- services層はTrue/Falseを返すような処理を行う場所
- 生成や変換はentityやvalue objectの責務とする
- 外部サービスとのやりとりはinfrastructure層の責務とする