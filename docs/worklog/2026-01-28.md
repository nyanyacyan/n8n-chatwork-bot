# Worklog 2026-01-28

## 今日の状況
- pytest の型整理とテスト追加を進行中
- Presentation のテストは Clean Architecture 方針の整理が必要

## 次にやるべきこと（全体整理）

### 最優先（設計方針の確定）
- WebhookServer は Clean Architecture に沿って構成を見直す
  - Presentation は UseCase を呼ぶだけにする
  - ChatworkClient は Infrastructure に置く
  - Presentation から Infrastructure を直接 import しない
- `src.base` や `data/schema` を使わない構成に寄せるか決める

### テスト方針
- Presentation テストは「設計が決まってから」追加
- 先に Application / Domain / Infrastructure のテストを固める

### 未着手 or 要整理
- Presentation の空ファイル（`webhook_controller.py`, `webhook_request_dto.py`）の実装方針
- `WebhookServer` の依存注入（DI）設計
- Clean Architecture 文書に合わせた命名・階層整理

### 具体的に残っている作業（候補）
- `WebhookServer` の修正案作成
- Presentation 用 schema の配置場所決定（data配下に置かない設計へ）
- Presentation テストをシンプルに書ける形へ整理

## メモ
- Clean Architecture では、Presentation は Infrastructure に依存しない
- 外部APIクライアントは Infrastructure に置く
- 入口（app.py等）で依存を組み立てる方針が望ましい
- Entity / ValueObject / UseCase の役割整理メモを追加: `docs/7_entity_valueobject_usecase_guide.md`
- Adapter / Port の図解メモを追加: `docs/8_adapter_port_guide.md`
- 社内決済例で Port / Adapter を整理したメモを追加: `docs/9_payment_port_adapter_example.md`
- Clean Architecture + Dify の学習ロードマップを追加: `docs/10_learning_roadmap_cleanarch_dify.md`
- 2月末完了向けの印刷用実行計画を追加: `docs/11_february_sprint_plan.md`
